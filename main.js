!function(){"use strict";const t=async function(){const t=await fetch("https://api.getgeoapi.com/v2/ip/check?api_key=861d752669853754f1c06aea0f8c3adf52d14278&format=json"),e=await t.json();return{latitude:e.location.latitude,longitude:e.location.longitude}},e=async function(t){const e=await fetch((t=>`https://api.geoapify.com/v1/geocode/search?text=${t}&apiKey=00abd8eb67ad48caad2c12048f2161c6`)(t)),a=await e.json();return{latitude:a.features[0].properties.lat,longitude:a.features[0].properties.lon}},a=function(t,e){document.querySelector(".map").src=((t,e)=>`https://static-maps.yandex.ru/1.x/?lang=en_US&ll=${e},${t}&size=450,450&z=10&l=map&pt=32.810152,39.889847,pm2rdl1~32.870152,39.869847,pm2rdl99`)(t,e)},n=(t,e)=>`https://api.openweathermap.org/data/2.5/weather?lat=${t}&lon=${e}&appid=6075b4aa58b2a8c37abcb76de0cd3c35&units=metric`;async function o(){const e=await t(),o=await fetch(n(e.latitude,e.longitude)),i=await o.json(),c=document.querySelector(".weather");a(e.latitude,e.longitude),c.innerHTML=`Current city is ${i.name}.<br><br>Temperature is ${i.main.temp} C`}async function i(t){if(!t)return;const o=await e(t),i=await fetch(n(o.latitude,o.longitude)),c=await i.json(),s=document.querySelector(".weather");r.setCityToLocalStorage(t),a(o.latitude,o.longitude),s.innerHTML=`The city is ${c.name}.<br><br>Temperature is ${c.main.temp} C`}function c(){const t=window.localStorage.getItem("city");t&&JSON.parse(t).length>10&&JSON.parse(t).pop()}document.addEventListener("DOMContentLoaded",(function(){const t=document.querySelector(".button"),e=document.querySelector(".inputCity");t.addEventListener("click",(function(){console.log(e.value),i(e.value)})),e.value||o()}));const r={getWeather:o,getWeatherInCity:i,setCityToLocalStorage:function(t){let e=[];const a=window.localStorage.getItem("city");a?(e=JSON.parse(a),e.includes(t)||e.unshift(t),c(),window.localStorage.setItem("city",JSON.stringify(e))):(e.unshift(t),window.localStorage.setItem("city",JSON.stringify(e)))},clearCityLocalStorageAboveThreshold:c}}();